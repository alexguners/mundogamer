<!DOCTYPE html>

<% include admin-header %>   
 <% if (message.length>0) { %>
        <div class="alert alert-success"><%= message %></div>
    <% } %>
          <div class="row-fluid">
            <div id="dashboard-left" class="span8">
             <div class="panel panel-primary"> 
                <div class="panel-body">
  					       <form id="LoginForm" role="form" class="form-horizontal" autocomplete="off"  method="post">
                   
                    <!-- Id da Plataforma -->
                    <input type="hidden" value="<%= jogo.id %>" name="id" />

                    <!-- Nome do jogo -->
                    <label>Nome do jogo</label>
                    <input type="text" class="input-block-level" id="nome_jogo" name="nome_jogo" placeholder="Digite o nome do jogo" required="required" value="<%= jogo.nome_jogo %>" />
                    <!-- Fim Nome do jogo -->

                    <!-- Data de Lançamento -->
                   <label>Data de lançamento</label>
                   <input type="text" name="data_lancamento" id="data_lancamento" maxlength="10" placeholder="Exemplo 01/01/2014" onkeypress="return dateMask(this, event);" value="<% var d = new Date(jogo.data_lancamento); 
                    %><%= ('0' + d.getDate()).slice(-2) + '/' + ('0' + (d.getMonth()+1)).slice(-2) + '/'  + d.getFullYear() %>"/>
                    <!-- Fim Data de Lançamento -->


                    <!-- Empresa Responsavel -->
                    <label>Desenvolvedor</label>
                    <input type="text" class="form-control" id="desenvolvedor" name="desenvolvedor" placeholder="Empresa responsável" required="required" value="<%= jogo.desenvolvedor %>"/>
                    <!-- Fim da Empresa Responsavel -->

                    <!-- Editora Responsavel -->
                    <label>Editora</label>
                    <input type="text" class="form-control" id="editora" name="editora" placeholder="Empresa responsável" required="required" value="<%= jogo.editora %>"/>
                   <!-- Fim da Editora Responsavel -->

                    <!-- Site oficial do jogo -->
                    <label>Site oficial</label>
                    <input type="text" class="form-control" id="site" name="site" placeholder="Site oficial do jogo" value="<%= jogo.site %>"/>
                   <!-- Fim do Site oficial do jogo --> 

                    <!-- Site oficial do jogo -->
                    <label>Seleciona uma categoria</label>
                    <input type="text" data-provide="typeahead" id="typeahead" required="required" name="categoria" value="<%= jogo.categoria %>"/>
                    <!-- Fim do Site oficial do jogo --> 

                    <label>Selecione as Plataformas em que o jogo foi lançado</label>
                    <input type="text" data-provide="typeahead2" id="typeahead2" name="plataformas"  value="<%= jogo.plataformas %>"/> 
                    

                    <!-- Editor de texto da descrição do jogo-->
                    <label><h4 class="widgettitle">Cadastre um conteúdo de descrição para o jogo</h4></label> <textarea  class="ckeditor" name="editor1" id="editor1"><%= jogo.descricao_jogo %></textarea>                    
                    <!-- Fim do  Editor de texto da descrição do jogo-->

                    <!-- Fonte das informações -->
                     <label><h4 class="widgettitle">Caso sua descrição seja conteúdo de terceiros preencha os campos a seguir</h4></label>
                        <label>Nome da fonte de origem do conteúdo</label>
                        <% if (typeof jogo.nome_fonte !== 'undefined'){ %>
                          <% if ( (jogo.nome_fonte !== 'undefined')  && (jogo.nome_fonte !== ' ') ){ %> 
                          <input type="text" class="input-block" id="nome_fonte" name="nome_fonte" placeholder="Nome da Fonte" value="<%= jogo.nome_fonte %>"/> 
                        <%}%>
                        <%} else{ %>
                          <input type="text" class="input-block" id="nome_fonte" name="nome_fonte" placeholder="Nome da Fonte" value=""/>
                        <%}%>
                        
                        <label>Insira o endereço de acesso original do conteúdo</label>
                        <% if (typeof jogo.url_fonte !== 'undefined'){ %>
                          <% if ( (jogo.url_fonte !== 'undefined') && (jogo.url_fonte !== ' ') ) { %>
                          <input type="text" class="input-block-level" id="url_fonte" name="url_fonte" placeholder="URL de destino do conteúdo" value="<%= jogo.url_fonte %>" />
                        <%}%>
                        <%} else{ %>
                          <input type="text" class="input-block-level" id="url_fonte" name="url_fonte" placeholder="URL de destino do conteúdo" value="" />
                        <%}%>  
                    <!-- Fim das informações -->

                    <!-- Botão de Publicar jogo-->
                    <center><button id="SubmitBtn" name="SubmitBtn" type="submit" class="btn btn-large btn-inverse">Editar Jogo</button></center>  
                    <!-- Fim do Botão de Publicar jogo-->

                  </form>
						    </div>
						 </div>         
            </div>
        </div>
                <!-- Place inside the <head> of your HTML -->


  <script src="/admin/js/jquery-1.9.1.min.js" type="text/javascript"></script>
  <script src="/editor/ckeditor.js" type="text/javascript"></script>
  <script src="/admin/js/chosen.jquery.js" type="text/javascript"></script>
  <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.12.0/jquery.validate.min.js" type="text/javascript"></script>
  <script src="/admin/js/bootstrap.min.js" type="text/javascript"> </script>
  <script type="text/javascript">

     $('#typeahead').typeahead({
          source: function (query, process) {
              return $.getJSON(
                  'loadcategories',
                  { nome: query },
                  function (data) {
                      var newData = [];
                      console.log("data " + data);
                      $.each(data, function(){
                        console.log("data2 " + this.nome_categoria);
                          newData.push(this.nome_categoria);
                      });
                      return process(newData);

                  }); 
          }

      });

          $('#typeahead2').typeahead({
          source: function (query, process) {
              return $.getJSON(
                  'loadplataformas',
                  { nome: query },
                  function (data) {
                      var newData = [];
                      console.log("data " + data);
                      $.each(data, function(){
                        console.log("data2 " + this.nome_plataforma);
                          newData.push(this.nome_plataforma);
                      });
                      return process(newData);

                  }); 
          }

      });


    var nome_jogo = $("#nome_jogo");
    var LoginForm = $('#LoginForm');
    var SubmitBtn = $('#SubmitBtn');
 
    LoginForm.validate();
 
    nome_jogo.rules("add", {
      required: true,
      messages: {
        required: "Nome do jogo é obrigatório."
      }
    });
 
    $('#LoginForm').submit(function () {
      if ($(this).valid()) {
        $('#SubmitBtn').prop('disabled', true);
        return true;
      }
      return false;
    });
    
    
    
</script>


<% include admin-footer %>      


